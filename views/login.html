<!DOCTYPE html>
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>欢迎登录韩利峰个人网站</title>

    <!-- Bootstrap Core CSS -->
    <link href="bootstrap/css/bootstrap.min.2.css" rel="stylesheet">
    <link href="bootstrap/css/login.css" rel="stylesheet" type="text/css"/>

    <link href="bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css"/>
    
      <link href="bootstrap/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
    
      <link href="bootstrap/css/style-metro.css" rel="stylesheet" type="text/css"/>
    
      <link href="bootstrap/css/style.css" rel="stylesheet" type="text/css"/>
    
      <link href="bootstrap/css/style-responsive.css" rel="stylesheet" type="text/css"/>
    
      <link href="bootstrap/css/default.css" rel="stylesheet" type="text/css" id="style_color"/>
    
      <link href="bootstrap/css/uniform.default.css" rel="stylesheet" type="text/css"/>
    <!-- Custom CSS -->
    <!--<link href="bootstrap/css/modern-business.css" rel="stylesheet">-->

    <!-- Custom Fonts -->
    <!--<link href="bootstrap/css/font-awesome.min.css" rel="stylesheet" type="text/css">-->

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
	<style>

	#footer {
        width: 100%;
        height: 50px;
        position: fixed;
        bottom: 100px;
		font-family:"微软雅黑"
    }
  .txtunderline{
		text-decoration:underline;
	}
	
	</style>

</head>

<body class="login" style="background-color:#133364;overflow-x: hidden" >
<!--用户登录注册页面-->
  <div class="logo">
    <img src="image/logo.png" alt="" /> 
  </div> 

  <div class="content">
    <!-- 开始登陆界面 -->
      <form class="form-vertical login-form"  role="form" id="form1" onsubmit="return false">
          
                <h3 class="form-title">请登陆您的账户</h3>
          
                <div class="alert alert-error hide">
          
                  <button class="close" data-dismiss="alert"></button>
          
                  <span>Enter any username and password.</span>
          
                </div>
          
                <div class="control-group">
          
                  <!--ie8, ie9 does not support html5 placeholder, so we just show field title for that-->
          
                   <label class="control-label visible-ie8 visible-ie9">用户名</label>
          
                   <div class="controls">
          
                   <div class="input-icon left">
          
                      <i class="icon-user"></i>
          
                      <input class="m-wrap placeholder-no-fix" id="name" type="text" placeholder="Username" name="username"/>
          
                   </div>
          
                  </div>
          
                </div>
          
                <div class="control-group">
          
                  <label class="control-label visible-ie8 visible-ie9">密码</label>
          
                  <div class="controls">
          
                    <div class="input-icon left">
          
                      <i class="icon-lock"></i>
          
                      <input class="m-wrap placeholder-no-fix" id="pw1" type="password" placeholder="Password" name="password"/>
          
                    </div>
          
                  </div>
          
                </div>
                
                <p id="myhint" style="display:none;font-size:16px;color:red;"align="center">hint</p>
                <div class="form-actions">
                  <button type="submit" id="login0"  class="btn green pull-right">         
                  登陆 <i class="m-icon-swapright m-icon-white"></i>          
                  </button>            
          
                </div>

               
       </form>
    
 
 
  </div>



	<div class="copyright">
    
        <strong>TMSR &copy; 2017  &nbsp  &nbsp &nbsp钍基熔盐堆先进核能系统</strong>
    
   </div>
  <!-- <div id="footer">
	<h1 align="center" style="font-size:10px;color:white;margin-bottom:-50px"><strong>TMSR &copy; 2017  &nbsp  &nbsp &nbsp钍基熔盐堆先进核能系统</strong></h1>
</div> -->


   


    <!--注册用户  -->
    

    <!--注册用户  -->

  


    <script src="bootstrap/js/jquery.min.js"></script>

    <script src="bootstrap/js/bootstrap.min.js"></script>
    <script src="bootstrap/js/bootstrap3-validation.js"></script>




    <script type="text/javascript">
    $(function(){
	  $("#form2").validation(function(obj,params){
		if (obj.id=='username'){
			$.get("/user_exist",{username:$(obj).val()},function(data){
			//alert(data[0]);
			if(data.rowCount!=0){
			params.err = true;
			params.msg = "用户已存在";
			};
			});
			}}
			,{reqmark:true} //这个参数是设必填不要显示有星号，默认是有星号的
		);
      $("#login0").click(function(){
        var username = $("#name").val();
        var password = $("#pw1").val();
        var data = {"username":username,"password":password};
        // console.log("good");
        $.ajax({
          url:'/login',
          type:'post',
          data: data,
          success: function(data,status){
          console.log(status);
          if(status == 'success'){
            location.href = '/home';
            }
          },
          error: function(data,status){
            if(status == 'error'){
              if (data.status == 404){
              $("#myhint").text("用户名或密码不正确");
              $("#myhint").css("display","block");;
              }
            //location.href = '/login';
            }
          }
        });
      });

$("#register0").click(function(){ 
      if ($("#form2").valid('填写信息不正确')==false){
        //alert('填写信息不完整。');
       return false;
           };
  $("#form2").submit();

		});


    });
    </script>


    <!-- Script to Activate the Carousel -->
    <script>
    $('.carousel').carousel({
        interval: 5000 //changes the speed
    })
    </script>



</body></html>
